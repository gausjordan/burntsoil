<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="initial-scale=1.0 , minimum-scale=1.0 , maximum-scale=1.0" />
        <link rel="icon" type="image/x-icon" href="#">
        <link rel="stylesheet" href="game.css">
        <title id="title">Burnt Soil JS test</title>            
    </head>
   
    <body>
        <div class="whole-flex">
            <aside class="common-element">
            </aside>
            <section class="main-element">
                <header id="statusBar">
                    <div id="power">
                        Power: 100
                    </div>
                    <div id="angle">
                        Angle: 
                    </div>                    
                    <div id="playerName">
                        Player 1
                    </div>
                </header>
                <main>

                    <nav>
                        <div id="leftButtonCluster">
                            <div id="rotateCCW">&#8634;</div>
                            <div id="decButton">&minus;</div>
                            <div id="incButton">&plus;</div>
                            <div id="rotateCW">&#8635;</div>
                        </div>
                        <div id="rightButtonCluster">
                            <div id="fireButton">&#128293;</div>
                        </div>
                    </nav>
                    
                    <canvas id="canvas1">
                    </canvas>

                    <canvas id="canvas2">
                    </canvas>
                </main>
            </section>
            <aside class="common-element">
            </aside>

            <!-- Static .js loading -->
            <!--
                <script src="globals.js"></script>
                <script src="gameEvents.js"></script>
                <script src="tankClass.js"></script>
                <script src="helpers.js"></script>
                <script src="commonFunctions.js"></script>
                <script src="gameFunctions.js"></script>
                <script src="game.js"></script>
            -->

            <!-- Dynamic .js loading / cache busting / force reload  -->
            <script>
                async function loadScriptsSequentially(scripts) {
                    for (let src of scripts) {
                        await loadScript(src);
                    }
                }
            
                function loadScript(src) {
                    return new Promise(function(resolve, reject) {
                        var script = document.createElement('script');
                        script.src = src;
                        script.onload = resolve;
                        script.onerror = reject;
                        document.head.appendChild(script);
                    });
                }
            
                var timestamp = new Date().getTime();
                var scripts = [
                    'globals.js?t=' + timestamp,
                    'gameEvents.js?t=' + timestamp,
                    'tankClass.js?t=' + timestamp,
                    'helpers.js?t=' + timestamp,
                    'commonFunctions.js?t=' + timestamp,
                    'gameFunctions.js?t=' + timestamp,
                    'game.js?t=' + timestamp
                ];
            
                loadScriptsSequentially(scripts).catch(function(error) {
                    console.error('Script loading failed:', error);
                });
            </script>

        </div>
    </body>
</html>